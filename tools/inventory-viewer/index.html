<div class="inventory-viewer">
  <h2>Inventory Viewer</h2>
  <p class="tool-description">
    This tool allows you to visualize and explore Ansible inventory files in
    JSON format.
  </p>

  <div class="usage-instructions-collapsible">
    <button
      class="collapsible-toggle"
      id="toggleInstructions"
      aria-expanded="true"
    >
      How to use <span class="arrow">▼</span>
    </button>
    <div class="usage-instructions" id="instructionsContent">
      <ol>
        <li>Upload a JSON file using the "Browse Files" button, or</li>
        <li>Paste your JSON inventory data directly into the text area, or</li>
        <li>Click "Load Demo Inventory" to see an example</li>
        <li>Click "Process Inventory" to visualize your data</li>
        <li>Use the search box to find specific hosts or groups</li>
        <li>Click on items to expand/collapse them</li>
      </ol>
    </div>
  </div>

  <div class="input-section-collapsible">
    <button class="collapsible-toggle" id="toggleInput" aria-expanded="true">
      Inventory Input <span class="arrow">▼</span>
    </button>
    <section class="input-section" id="inputSection">
      <div class="upload-area" id="uploadArea">
        <input
          type="file"
          id="fileInput"
          accept=".json"
          style="display: none"
          aria-label="Choose JSON file"
        />
        <button id="browseButton" aria-label="Browse files">
          Browse Files
        </button>
        <button
          id="loadDemoButton"
          class="demo-button"
          style="margin-left: 8px"
        >
          Load Demo Inventory
        </button>
        <div class="file-size-warning" id="fileSizeWarning">
          Large files may take longer to process
        </div>
      </div>
      <div class="text-input">
        <textarea
          id="jsonInput"
          placeholder="Or paste your JSON inventory data here..."
          aria-label="JSON inventory data"
        ></textarea>
      </div>
      <div class="button-group">
        <button id="loadButton" aria-label="Load inventory">
          Process Inventory
        </button>
        <button id="clearButton" aria-label="Clear all data">Clear Data</button>
      </div>
    </section>
  </div>

  <section
    class="search-section"
    id="searchSection"
    style="display: none; margin-top: 20px"
  >
    <div class="search-row">
      <div class="search-input" style="position: relative">
        <input
          type="text"
          id="searchInput"
          placeholder="Search inventory..."
          aria-label="Search inventory"
        />
        <button
          id="clearSearchButton"
          title="Clear search"
          aria-label="Clear search"
          style="
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 18px;
            color: #888;
            cursor: pointer;
            display: none;
          "
        >
          &times;
        </button>
      </div>
      <div class="search-type-dropdown">
        <select
          id="searchTypeSelect"
          aria-label="Search type"
          style="
            padding: 6px 10px;
            font-size: 1em;
            border-radius: 4px;
            border: 1px solid #ccc;
          "
        >
          <option value="all">All</option>
          <option value="hosts">Hosts</option>
          <option value="groups">Groups</option>
          <option value="vars">Variables</option>
        </select>
      </div>
      <div class="view-controls">
        <button id="expandAllButton" aria-label="Expand all items">
          Expand All
        </button>
        <button id="shrinkAllButton" aria-label="Collapse all items">
          Shrink All
        </button>
      </div>
    </div>
  </section>

  <section class="display-section">
    <div class="empty-state" id="emptyState">
      <p>No inventory loaded yet</p>
      <p>Upload a JSON file or paste JSON data above</p>
    </div>
    <div class="inventory-tree" id="inventoryTree" style="display: none"></div>
  </section>

  <div class="copy-notification" id="copyNotification">
    Copied to clipboard!
  </div>
  <div class="loading-overlay" id="loadingOverlay" style="display: none">
    <div class="loading-spinner"></div>
    <div class="loading-message">Processing...</div>
    <div class="loading-progress">
      <div class="loading-progress-bar" id="progressBar"></div>
    </div>
  </div>
</div>
